<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\apt/homologation\2011\preHomologationEMA.apt at 2021-04-27
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20210427" />
    <meta http-equiv="Content-Language" content="en" />
    <title>DevBox-Santé DMP : Le connecteur DMP par DEVCOOP &#x2013; </title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.7.min.js"></script>
<meta name="author" content="DEVCOOP"/>
            <meta name="description" 
                  content="La DevBox-Santé DMP est une interface de programmation écrite en Java, 
                        fournissant une abstraction de haut niveau permettant l exécution 
                        de l ensemble des transactions définies dans le cahier des charges 
                        pour la DMP Compatibilité. 
                        Elle facilite ainsi aux intégrateurs/éditeurs la mise en place des 
                        contraintes fortes demandées pour la DMP Compatibilité. La DevBox-Santé DMP est un connecteur de la http://www.devbox-sante.fr
"/>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="https://www.devbox-sante.fr/" id="bannerLeft"><img src="../../devbox-sante-logo-color.png"  alt="DevBox-Santé"/></a></div>
        <div class="pull-right"><a href="https://www.devbox-sante.fr/connecteurs/dmpc-api" id="bannerRight"><img src="../../toolbox-devcoop-dmpc-api-logo.png"  alt="DevBox-Santé DMP"/></a></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2021-04-27<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 4.1-SNAPSHOT</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header"></li>
    <li><a href="../../index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
      <li class="nav-header">Proxy REST</li>
    <li><a href="../../proxy-rest/proxy-rest.html" title="Commencer"><span class="none"></span>Commencer</a></li>
    <li><a href="https://dmpc-demo.devbox-sante.fr/swagger-ui.html" class="externalLink" title="Démonstration"><span class="none"></span>Démonstration</a></li>
      <li class="nav-header">Embedded Client</li>
    <li><a href="../../embedded/firstStepEmbedded.html" title="Commencer"><span class="none"></span>Commencer</a></li>
    <li><a href="../../embedded/transactions.html" title="Transactions supportées"><span class="none"></span>Transactions supportées</a></li>
    <li><a href="../../embedded/howtos/uniqueIdGenerator.html" title="Howto : UniqueId"><span class="none"></span>Howto : UniqueId</a></li>
      <li class="nav-header">Proxy WS</li>
    <li><a href="../../proxy-ws/firstStepProxyWS.html" title="Proxy WS / Commencer"><span class="none"></span>Proxy WS / Commencer</a></li>
    <li><a href="../../proxy-ws/configurationServeurProxy.html" title="Proxy WS / Configurer"><span class="none"></span>Proxy WS / Configurer</a></li>
      <li class="nav-header">Howtos</li>
    <li><a href="../../howtos/schematron.html" title="Schematron"><span class="none"></span>Schematron</a></li>
    <li><a href="../../howtos/certificatIGCSante.html" title="Obtenir des Certificats serveurs"><span class="none"></span>Obtenir des Certificats serveurs</a></li>
    <li><a href="../../docReference.html" title="Liens vers les documentations"><span class="none"></span>Liens vers les documentations</a></li>
      <li class="nav-header">Documents CDA</li>
    <li><a href="../../CDA/structurationMinimale.html" title="Structuration Minimale"><span class="none"></span>Structuration Minimale</a></li>
    <li><a href="../../CDA/crBiologie.html" title="CR Biologie"><span class="none"></span>CR Biologie</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="https://www.devcoop.fr/" title="DevBox-Sante" class="builtBy"><img class="builtBy"  alt="DevBox-Sante" src="https://www.devcoop.fr/img/logo.png"    /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<section>
<h2><a name="PreHomologation"></a>PreHomologation</h2>
<p>Ce document contient l'ensemble des informations importantes concernant la preHomologation et la pr&#xe9;paration &#xe0; l'homologation.</p><section>
<h3><a name="Configuration_du_serveur_DMP"></a>Configuration du serveur DMP </h3>
<p>Je reprends ici, les informations donn&#xe9;es par l'ASIP :</p><section>
<h4><a name="URLs_d.27acc.C3.A8s"></a>URLs d'acc&#xe8;s </h4>
<ul>
<li>Racine des Web Services : <a class="externalLink" href="https://dev17.lps.dmp.gouv.fr/si-dmp-server/v1/services">https://dev17.lps.dmp.gouv.fr/si-dmp-server/v1/services</a></li>
<li>Racine du WebPS : <a class="externalLink" href="https://dev17.ps.dmp.gouv.fr">https://dev17.ps.dmp.gouv.fr</a></li></ul></section><section>
<h4><a name="Caract.C3.A9ristiques_de_l.27environnement"></a>Caract&#xe9;ristiques de l'environnement</h4>
<ul>
<li>Serveur DMP : version 1.0.6-11 (identique &#xe0; la production)</li>
<li>Num&#xe9;ro d'homologation temporaire &#xe0; utiliser:
<div class="source"><pre class="prettyprint linenums">LPS_Nom=HEMADIALYSE
LPS_Version=4
LPS_ID_HOMOLOGATION_DMP=EMA-634256-tmp1
LPS_ID=&lt;Num&#xe9;ro de s&#xe9;rie ou identifiant de l&#x2019;installation du logiciel&gt;(obligatoire dans cette version du DMP)
</pre></div></li></ul></section><section>
<h4><a name="Acc.C3.A8s_WebPS_:"></a>Acc&#xe8;s WebPS :</h4>
<ul>
<li>N&#xe9;cessite d'installer une cryptolib (version conseill&#xe9;e : 3.06 sous Windows) : disponible sur site &#xe9;diteur ASIP-CPS</li>
<li>N&#xe9;cessite une carte CPS de test (non expir&#xe9;e, non oppos&#xe9;e) pour s'authentifier (sans d&#xe9;claration pr&#xe9;alable)
<p>Peut &#xea;tre utile pour :</p>
<ul>
<li>Tester l'acc&#xe8;s contextuel TD 0.9,</li>
<li>Cr&#xe9;er des DMP (si profil non impl&#xe9;ment&#xe9;),</li>
<li>S'autoriser sur les DMP existants (tant que TD0.3 non fonctionnelle),</li>
<li>Fermer des DMP, ...</li></ul></li></ul></section></section><section>
<h3><a name="Configuration_du_proxyDMPC"></a><a name="Configuration">Configuration</a> du proxyDMPC</h3>
<p>Pour suivre les caract&#xe9;ristiques de l'environnement de prehomologation, j'ai d&#xe9;fini une configuration <code>dmpc-dev17.properties</code>: </p>
<div class="source"><pre class="prettyprint linenums"># Num&#xe9;ro d'homologation donn&#xe9; par l'ASIP
dmpc.lpsInfo.homologationId=EMA-634256-tmp1

# Version du logiciel homologu&#xe9;
dmpc.lpsInfo.version=4

# Nom du logiciel homlogu&#xe9;
dmpc.lpsInfo.nom=HEMADIALYSE

# Identifiant (OID) AFNOR de la soci&#xe9;t&#xe9; 
# 1.2.250.1 est l'OID de l'AFNOR
# 1.2.250.1.266 est l'OID d'h&#xe9;madialyse
# 1.2.250.1.266.1 est l'OID correspondant &#xe0; la DMPC pour h&#xe9;madialyse
dmpc.source.idRoot=1.2.250.1.266.1

# Identifiant unique de l'instance du logiciel install&#xe9;
# (Doit correspondre &#xe0; l'identifiant unique de l'installation du logiciel h&#xe9;madialyse 
#  install&#xe9;, doit &#xea;tre chang&#xe9; lors de l'installation) 
dmpc.source.idExtension=123456

#Num&#xe9;ro de s&#xe9;rie ou identifiant de l'installation du logiciel 
# (ici est concat&#xe9;n&#xe9; l'OID d'h&#xe9;madialyse avec l'identifiant unique de l'installation)
dmpc.lpsInfo.id=1.2.250.1.266.1.123456

# chemin vers le keystore smime pour la signature, g&#xe9;n&#xe9;r&#xe9; par CleoCPS et valid&#xe9; par le GIP CPS.
dmpc.smime.p12.path=./src/test/resources/Certificat_SMIME_1_2300169110.p12

# mot de passe du certificat smime
dmpc.smime.p12.password=hemadialyse

# chemin vers le keystore ssl pour connexion tls, g&#xe9;n&#xe9;r&#xe9; par CleoCPS et valid&#xe9; par le GIP CPS.
dmpc.ssl.p12.path=./src/test/resources/Certificat_SSL_1_2300169110.p12

# mot de passe du certificat smime
dmpc.ssl.p12.password=hemadialyse

# Url du serveur DMP
dmpc.url.prefix=https://dev17.lps.dmp.gouv.fr/si-dmp-server/v1/services

#Login du proxy 
dmpc.proxy.login=hemadialyse

#Password du proxy 
dmpc.proxy.password=hemadialyse
</pre></div>
<p>Pour l'utiliser, il suffit de lancer le serveur avec la commande suivante :</p>
<div class="source"><pre class="prettyprint linenums">%&gt; java -cp dmpc-proxy-ws.jar DMPCProxyServer  /
        -proxyURL http://127.0.0.1:9999/dmpcProxy -springContext META-INF/spring/dmpc-dev17.xml
</pre></div>
<dl>
<dt>En cours de r&#xe9;alisation</dt>
<dd>vous permettre d'&#xe9;diter ce fichier de configuration et vous permettre ainsi de configurer vos diff&#xe9;rents environnements de production.</dd></dl></section><section>
<h3><a name="Exigences_de_l.27ASIP_pour_la_prehomologation_et_l.27homologation"></a>Exigences de l'ASIP pour la prehomologation et l'homologation </h3>
<p>Les sc&#xe9;narii de test (<code>DMP1_LPS_TEC_Referentiel Pr&#xe9;homologation_20111129_1 0 0</code>) sont partag&#xe9;s sur <b>le Google doc suivant : <a class="externalLink" href="http://bit.ly/rrJPwW"> Referentiel PreHomologation</a></b></p>
<p>Dans ce document, il faut : </p>
<ul>
<li><b>suivre les tests en jaune de la feuille &quot;Plan de tests&quot;.</b></li>
<li><b>remplir les exigences de la feuille &quot;Exigences_DSFT&quot; : j'ai mis en jaune les cases &#xe0; remplir et les accronymes des personnes aptes &#xe0; remplir la case avec le soutien d'un autre accronyme.</b></li></ul>
<dl>
<dt>Remarque</dt>
<dd>Pour soumettre, nos r&#xe9;ponses &#xe0; l'ASIP il faut suivre leur formalisme. Je propose n&#xe9;anmoins de travailler sur les Google Docs afin de faciliter la gestion des versions de document, et consolider dans un seul document ASIP &#xe0; la fin.</dd>
<dt>Remarque 2</dt>
<dd>Pour v&#xe9;rifier le bon d&#xe9;roulement des tests, il vous suffit de me fournir les logs g&#xe9;n&#xe9;r&#xe9;s par le proxy.</dd></dl>
<p>Concernant les plans de test, j'ai cod&#xe9; en java un sc&#xe9;nario r&#xe9;pondant &#xe0; l'ensemble des exigences pour la pr&#xe9;homologation : <a href="./xref/fr/devcoop/dmpc/proxy/ws/client/PreHomologationScenario.html">./xref/fr/devcoop/dmpc/proxy/ws/client/PreHomologationScenario.html</a></p>
<p>N'h&#xe9;sitez pas &#xe0; vous r&#xe9;f&#xe9;rer &#xe0; ce source.</p>
<p>Pour l'ex&#xe9;cuter :</p>
<div class="source"><pre class="prettyprint linenums">java -cp dmpc-proxy-ws.jar fr.devcoop.dmpc.proxy.ws.client.PreHomologationScenario /
  -proxyURL http://127.0.0.1:9999/dmpcProxy /
  -proxyLogin hemadialyse /
  -proxyPassword hemadialyse /
  -insc 1266170333150997413760

</pre></div>
<p>La liste des INSCs est disponible dans la feuille PATIENTS_LOT1 du fichier Excel (<code>DMP1_LPS_Jeu_essai_pour_DEV_editeur_20110530_v0.0.4</code>). Ce fichier d&#xe9;crit le jeu de donn&#xe9;es charg&#xe9; pour les tests. Il contient 20 DMP vides, 5 DMP charg&#xe9;s avec des documents. </p></section></section>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2021.
All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>
</html>
