<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2020-02-24 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20200224" />
    <meta http-equiv="Content-Language" content="en" />
    <title>DMPC-API : Le connecteur DMP par DEVCOOP &#x2013; Obtention de certificats serveurs pour la nouvelle IGC Santé</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.5.min.js"></script>

          <meta name="author" content="DEVCOOP"/>
            <meta name="description" 
                  content="La DMPC-API est une interface de programmation écrite en Java, 
                        fournissant une abstraction de haut niveau permettant l exécution 
                        de l ensemble des transactions définies dans le cahier des charges 
                        pour la DMP Compatibilité. 
                        Elle facilite ainsi aux intégrateurs/éditeurs la mise en place des 
                        contraintes fortes demandées pour la DMP Compatibilité."/>
                      </head>
        <body class="topBarEnabled">
          
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">DMPC <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="../igc/certificatIGCSante.html"  title="Certificats serveurs IGC Santé">Certificats serveurs IGC Santé</a>
</li>
                  
                      <li>      <a href="../docReference.html"  title="Liens vers les documentations">Liens vers les documentations</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Embedded Client <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../embedded/firstStepEmbedded.html"  title="Commencer">Commencer</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Proxy <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../proxy-ws/firstStepProxyWS.html"  title="Proxy WS / Commencer">Proxy WS / Commencer</a>
</li>
                  
                      <li>      <a href="../proxy-ws/configurationServeurProxy.html"  title="Proxy WS / Configurer">Proxy WS / Configurer</a>
</li>
                  
                      <li>      <a href="../proxy-rest/todo.html"  title="Autres proxy">Autres proxy</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documents CDA <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../CDA/structurationMinimale.html"  title="Structuration Minimale">Structuration Minimale</a>
</li>
                  
                      <li>      <a href="../CDA/crBiologie.html"  title="CR Biologie">CR Biologie</a>
</li>
                          </ul>
      </li>
                  </ul>
          
          
                                                                            
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.devcoop.fr/" id="bannerLeft">
                                                                                        <img src="http://www.devcoop.fr/img/logo.png"  alt="DEVCOOP"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://www.devcoop.fr/" id="bannerRight">
                                                                                        <img src="http://www.devcoop.fr/img/fondBas.png"  alt="DMPC-API"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2020-02-24
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 3.1-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <h1>Obtention de certificats serveurs pour la nouvelle IGC Sant&#xe9;</h1>
<p>Une nouvelle IGC Sant&#xe9; a &#xe9;t&#xe9; mise en place par la CNAMTS courant 2016 : <a class="externalLink" href="http://integrateurs-cps.asipsante.fr/IGC-Sante">http://integrateurs-cps.asipsante.fr/IGC-Sante</a></p>
<p>Afin d&#x2019;utiliser le connecteur DMPC-API en mode authentification indirecte, il vous faut obtenir des certificats serveurs provenant de cette autorit&#xe9;. Pour cel&#xe0; apr&#xe8;s avoir command&#xe9; des cartes CPS vous pouvez faire une demande &#xe0; partir d&#x2019;un t&#xe9;l&#xe9;service dont la proc&#xe9;dure est d&#xe9;crite ici.</p>
<p>Rem :&#xa0;L&#x2019;int&#xe9;gration dans la DMPC-API suit les pr&#xe9;conisations d&#xe9;finies dans <a class="externalLink" href="https://industriels.sesam-vitale.fr/documents/823064/0/DMP+Notice+Migration+IGC+Sant%C3%A9/065c6192-247c-462b-bcd5-24a8d708e592">https://industriels.sesam-vitale.fr/documents/823064/0/DMP+Notice+Migration+IGC+Sant%C3%A9/065c6192-247c-462b-bcd5-24a8d708e592</a> .</p>
<div class="section">
<h2><a name="Obtention_des_certificats_et_cls."></a>Obtention des certificats et cl&#xe9;s.</h2>
<p>Pour obtenir, les certificats et cl&#xe9;s n&#xe9;cessaires pour la connexion au DMP, il est possible d&#xe9;sormais de les commander sur un site web mis &#xe0; disposition par l&#x2019;ASIP Sant&#xe9;. Il s&#x2019;agit d&#x2019;un service permettant la commande de certificats et cartes :&#xa0;</p>
<p><a class="externalLink" href="https://pfc.eservices.esante.gouv.fr">https://pfc.eservices.esante.gouv.fr</a></p>
<p>Pour pouvoir y acc&#xe9;der il faut se connecter avec un lecteur de cartes CPS configur&#xe9; et une carte CPA autoris&#xe9;e au pr&#xe9;alable :</p>
<p><img src="./pfcngAccueil.PNG" alt="pfcng" /></p>
<div class="section">
<h3><a name="Certificats_et_cls_dauthentification"></a>Certificats et cl&#xe9;s d&#x2019;authentification</h3>
<div class="section">
<h4><a name="Demander"></a>Demander</h4>
<div class="section">
<h5><a name="atape_1:"></a>&#xc9;tape 1:&#xa0;</h5>
<p><img src="./pfcngDemandeStep1.PNG" alt="pfcng" /></p></div>
<div class="section">
<h5><a name="atape_2:"></a>&#xa0;&#xc9;tape 2:</h5>
<p>RAS, il s&#x2019;agit d&#x2019;un &#xe9;cran de recherche pour les demandes ant&#xe9;rieures. Cliquer sur &#x201c;Demander un nouveau produit&#x201d;</p></div>
<div class="section">
<h5><a name="atape_3:"></a>&#xc9;tape 3:</h5>
<p>Il faut renseigner : </p>

<ul>
  
<li>l&#x2019;usage :&#xa0;AUTH_CLI</li>
  
<li>le nom du service (nom du logiciel) qui va acc&#xe9;der au DMP,</li>
  
<li>son adresse email (utiliser plus tard pour envoyer une confirmation)</li>
</ul>
<p><img src="./pfcngDemandeStep3Auth.PNG" alt="pfcng" /></p></div>
<div class="section">
<h5><a name="atape_4_:"></a>&#xc9;tape 4 :</h5>
<p><img src="./pfcngDemandeStep4GenerateCSR.PNG" alt="pfcng" /></p>
<p>Pour cette &#xe9;tape le plus simple est de g&#xe9;n&#xe9;rer la CSR&#xa0;sur le site, mais pas obligatoire.</p>

<ul>
  
<li>Saisir un mot de passe assez fort pour convenir au service, et sauvegarder le car il sera demand&#xe9; lors de la r&#xe9;cup&#xe9;ration du certificats P12, ainsi que pour configurer la DMPC-API.</li>
  
<li>Cliquer sur &#x201c;G&#xe9;n&#xe9;rer la CSR&#x201d;, puis &#x201c;Finaliser&#x201d;</li>
</ul></div>
<div class="section">
<h5><a name="atape_5_:"></a>&#xc9;tape 5 :</h5>
<p>Vous recevez un email de confirmation de la demande &#xe0; l&#x2019;adresse (correspondant &#xe0; la carte CPS enregistr&#xe9;e, ou &#xe0; l&#x2019;email saisie &#xe0; l&#x2019;&#xe9;tape 3, TOCHECK) :</p>
<p><img src="./pfcngDemandeMailRecap.PNG" alt="pfcng" /></p></div></div>
<div class="section">
<h4><a name="Rcuprer"></a>R&#xe9;cup&#xe9;rer</h4>
<p>Vous recevez un deuxi&#xe8;me mail contenant un lien permettant de r&#xe9;cup&#xe9;rer le certificat sur ce m&#xea;me site. </p>
<div class="section">
<h5><a name="atape_2:"></a>&#xc9;tape 2:</h5>
<p>Saisir un nouveau mot de passe pour les r&#xe9;vocations (non utilis&#xe9; dans l&#x2019;API)</p>

<ul>
  
<li>Finalisation</li>
</ul>
<p>Le certificat/cl&#xe9; (p12) a un nom qui doit ressembler &#xe0; asip-p12-EL-TEST-ORG-AUTH_CLI-20170603-173116.p12</p></div></div></div>
<div class="section">
<h3><a name="Certificats_et_cls_de_signature"></a>Certificats et cl&#xe9;s de signature</h3>
<p>Pour la signature, il faut faire une autre demande avec le m&#xea;me process, &#xe0; l&#x2019;exception de l&#x2019;&#xe9;tape 3 ou il faudra demander un certificat de signature : Usage SIGN</p>
<p><img src="./pfcngDemandeStep3Sign.PNG" alt="pfcng" /></p></div></div>
<div class="section">
<h2><a name="Configuration_de_la_DMPC-API"></a>Configuration de la DMPC-API</h2>
<p>Le param&#xe8;trage de ces certificats pour la DMPC-API se trouve dans le <tt>application.yml</tt></p>

<ul>
  
<li>dmpc.url.prefix</li>
  
<li>dmpc.smime.p12.path</li>
  
<li>dmpc.smime.p12.password</li>
  
<li>dmpc.ssl.p12.path</li>
  
<li>dmpc.ssl.p12.password</li>
  
<li>dmpc.ssl.trust.path</li>
</ul>
<p>Exemple de configuration &#xe0; fournir :</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">dmpc:
   # informations relatives au certificat smime
    smime:
        p12: 
            path:
                #./smime.p12
                A_renseigner 
            password:
                A_renseigner
    # informations relatives au certificat ssl
    ssl:
        p12:
            path:
                #ssl.p12
                A_renseigner
            password:
                A_renseigner
        # Contient les certificats serveurs autoris&#xe9;s pour authentification mutuelle         
        trust:
            path:
                truststoreIgcSante-EL-ORG.jks
</pre></div></div></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
                      <div class="row">
                                      <p >Copyright &copy;                    2020
                        <a href="https://www.spring.io">Pivotal Software, Inc.</a>.
            All rights reserved.    
      </p>
                </div>

                <p id="poweredBy" class="pull-right">
                                                                                                                <a href="http://www.devcoop.fr/" title="DEVCOOP" class="builtBy">
        <img class="builtBy"  alt="DEVCOOP" src="http://www.devcoop.fr/img/logo.png"    />
      </a>
                  </p>
        
                </div>
    </footer>
        </body>
</html>
